<%@string header="includes/header.md.rsp"%>
<%@string footer="includes/footer.md.rsp"%>
<%@string references="../includes/references.md.rsp"%>
<%@string appendix="${appendix}" default="true"%>
<%@string fcnname=""%>
<%@string fcntags=""%>
<%@meta author="Henrik Bengtsson"%>

<%--------------------------------------------------------------
 RSP specific
 --------------------------------------------------------------%>
<%
R.utils::use("R.utils, R.devices, knitr, ggplot2")
options("devEval/args/field"="pathname")
options("withCapture/newline"=FALSE)
options(deparse.cutoff=100)
kable <- function(...) knitr::kable(..., format="markdown")
%>

<%--------------------------------------------------------------
 Report/package specific
 --------------------------------------------------------------%>
<%
use("matrixStats")
use("microbenchmark")
%>

<% benchmarkResults <- function(stats, fcnname=levels(stats$expr)[1L], tags=NULL, ...) { %>

<% kable(summary(stats)) %>
_Figure: Benchmarking of <%=hpaste(sprintf("%s()", levels(stats$expr)), lastCollapse=" and ")%> on <%=paste(tags, collapse="+")%> data.  Times are in milliseconds._

![](<%=toPNG(fcnname, tags=c(tags, "benchmark"), aspectRatio=2/3, {
  gg <- qplot(x=seq_along(time)/length(levels(stats$expr)), y=time/1e6, data=stats, colour=expr)
  gg <- gg + xlab("iteration") + ylab("time (ms)")
  gg <- gg + ylim(0,NA)
  print(gg)
})%>)

<% } # benchmarkResults() %>


<%--------------------------------------------------------------
 Macros
 --------------------------------------------------------------%>


<%--------------------------------------------------------------
 Timing
 --------------------------------------------------------------%>
<% rspStartTime <- Sys.time() %>

